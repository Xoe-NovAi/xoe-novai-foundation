# Vikunja Documentation Integration Configuration
# Version: 1.0.0
# Created: 2026-02-17
# Purpose: Configure Vikunja projects and tasks for Documentation Excellence Initiative

---
# Vikunja API Configuration
api:
  url: ${VIKUNJA_API_URL:-http://localhost:3456/api/v1}
  token_file: secrets/vikunja_jwt_secret.txt
  timeout: 30
  retry_attempts: 3
  retry_delay: 5

# Documentation Excellence Projects
projects:
  documentation-health:
    name: "Documentation Health & Maintenance"
    description: |
      Ongoing documentation maintenance tasks including freshness reviews,
      frontmatter fixes, and archival management.
    color: "#4A90D9"
    icon: "book-medical"
    labels:
      - name: freshness
        color: "#FFA500"
        description: "Document freshness review tasks"
      - name: quality
        color: "#FF6B6B"
        description: "Content quality issues"
      - name: archival
        color: "#9B59B6"
        description: "Archival and deprecation tasks"
      - name: review
        color: "#3498DB"
        description: "Manual review required"
      - name: frontmatter
        color: "#2ECC71"
        description: "Frontmatter metadata fixes"
      - name: links
        color: "#E74C3C"
        description: "Broken link repairs"

  documentation-excellence:
    name: "Documentation Excellence Initiative"
    description: |
      Strategic initiative to transform documentation into an intelligent,
      automated, self-sustaining ecosystem.
    color: "#50C878"
    icon: "rocket"
    labels:
      - name: phase-1
        color: "#1ABC9C"
        description: "Foundation phase tasks"
      - name: phase-2
        color: "#3498DB"
        description: "Optimization phase tasks"
      - name: phase-3
        color: "#9B59B6"
        description: "Advanced features phase"
      - name: research
        color: "#F1C40F"
        description: "Research requests"
      - name: implementation
        color: "#2ECC71"
        description: "Implementation tasks"
      - name: agent-protocol
        color: "#E67E22"
        description: "Agent development tasks"

# Task Templates
task_templates:
  freshness_review:
    project: documentation-health
    title_template: "Review: {document_title}"
    description_template: |
      ## Document Freshness Review Required
      
      **Document**: `{document_path}`
      **Days Since Update**: {days_stale}
      **Current Status**: {current_status}
      
      ### Review Checklist
      - [ ] Content accuracy verified
      - [ ] All links validated
      - [ ] Hardware context current (if applicable)
      - [ ] Frontmatter complete and accurate
      - [ ] No superseding documentation exists
      
      ### Actions
      - Update content if needed
      - Set `status: deprecated` if obsolete
      - Archive if no longer relevant
      
      ### Generated by
      Librarian Agent on {generated_date}
    labels: [freshness, review]
    priority: MEDIUM
    due_date_offset: +7d

  frontmatter_fix:
    project: documentation-health
    title_template: "Fix Frontmatter: {document_title}"
    description_template: |
      ## Frontmatter Validation Failed
      
      **Document**: `{document_path}`
      
      ### Missing/Invalid Fields
      {missing_fields}
      
      ### Required Fields
      - `last_updated`: Date of last modification
      - `status`: draft | active | deprecated | archived
      - `category`: Reference | Tutorial | How-to | Explanation
      
      ### Optional Fields
      - `hardware_context`: Required for performance docs
      - `depends_on`: Related documents
      - `supersedes`: Superseded documents
      - `tags`: Content tags
      
      ### How to Fix
      1. Open the document
      2. Add/update the frontmatter block at the top
      3. Ensure all required fields are present
      4. Run `make docs-validate-frontmatter` to verify
      
      ### Generated by
      Librarian Agent on {generated_date}
    labels: [frontmatter, fix]
    priority: HIGH
    due_date_offset: +3d

  archival_review:
    project: documentation-health
    title_template: "Archive Review: {document_title}"
    description_template: |
      ## Document Archival Review
      
      **Document**: `{document_path}`
      **Reason for Archival**: {archive_reason}
      
      ### Archival Criteria Met
      {archival_criteria}
      
      ### Proposed Archive Location
      `{archive_path}`
      
      ### Actions Required
      - [ ] Confirm document should be archived
      - [ ] Verify no active references to this document
      - [ ] Update any links pointing to this document
      - [ ] Approve archival task
      
      ### After Approval
      Librarian Agent will:
      1. Move document to archive location
      2. Update genealogy tracker
      3. Create archive notice at original location
      
      ### Generated by
      Librarian Agent on {generated_date}
    labels: [archival, review]
    priority: LOW
    due_date_offset: +14d

  broken_links:
    project: documentation-health
    title_template: "Fix Broken Links: {document_title}"
    description_template: |
      ## Broken Links Detected
      
      **Document**: `{document_path}`
      
      ### Broken Links
      {broken_links}
      
      ### Link Types
      - **Internal**: Links to other project documents
      - **External**: Links to external resources
      - **Section**: Links to sections within the document
      
      ### How to Fix
      1. Check if the target document exists
      2. Update the link path if moved
      3. Remove the link if target no longer exists
      4. Run `make docs-validate` to verify
      
      ### Generated by
      QA Agent on {generated_date}
    labels: [links, fix]
    priority: MEDIUM
    due_date_offset: +5d

  research_request:
    project: documentation-excellence
    title_template: "Research: {research_title}"
    description_template: |
      ## Research Request
      
      **Request ID**: {request_id}
      **Assigned To**: {assigned_to}
      **Priority**: {priority}
      **Due Date**: {due_date}
      
      ### Objective
      {objective}
      
      ### Scope
      {scope}
      
      ### Deliverables
      {deliverables}
      
      ### Success Criteria
      {success_criteria}
      
      ### Result Location
      Results should be stored in:
      `internal_docs/02-research-lab/RESEARCH-RESULTS/{request_id}-result.md`
    labels: [research]
    priority: HIGH
    due_date_offset: custom

# Automated Task Creation Rules
automation_rules:
  - name: stale_document_detection
    trigger:
      type: scheduled
      schedule: "0 */6 * * *"  # Every 6 hours
    condition:
      field: days_since_update
      operator: greater_than
      value: 90
    action:
      template: freshness_review
      auto_assign: false

  - name: frontmatter_validation_failure
    trigger:
      type: event
      channel: doc:events
      pattern: frontmatter.invalid
    condition:
      field: error_count
      operator: greater_than
      value: 0
    action:
      template: frontmatter_fix
      auto_assign: false

  - name: broken_link_detection
    trigger:
      type: event
      channel: doc:quality
      pattern: links.broken
    condition:
      field: broken_count
      operator: greater_than
      value: 0
    action:
      template: broken_links
      auto_assign: false

  - name: archival_candidate
    trigger:
      type: event
      channel: doc:events
      pattern: document.deprecated
    condition:
      field: status
      operator: equals
      value: deprecated
    action:
      template: archival_review
      auto_assign: false

# Webhook Configuration
webhooks:
  enabled: true
  endpoint: /api/v1/documentation/events
  events:
    - document.created
    - document.updated
    - document.deprecated
    - document.archived
    - review.required
    - quality.issue
  secret: ${VIKUNJA_WEBHOOK_SECRET}

# Notification Settings
notifications:
  email:
    enabled: false  # Zero-telemetry: no external emails
  memory_bank:
    enabled: true
    update_files:
      - activeContext.md
      - progress.md
  redis_stream:
    enabled: true
    channels:
      - doc:events
      - doc:quality
      - doc:reports

# Integration Settings
integration:
  librarian_agent:
    enabled: true
    auto_create_tasks: true
    auto_resolve_tasks: true
    scan_directories:
      - docs/
      - internal_docs/
      - expert-knowledge/
      - memory_bank/
    exclude_patterns:
      - "**/_archive/**"
      - "**/node_modules/**"
      - "**/.git/**"
      
  qa_agent:
    enabled: true
    quality_threshold: 0.5
    auto_create_fix_tasks: true
    
  search_agent:
    enabled: true
    auto_index_updates: true
    
  integration_agent:
    enabled: true
    standardization_schedule: "0 0 1 * *"  # Monthly

# Performance Settings
performance:
  batch_size: 50
  concurrent_requests: 3
  cache_ttl: 3600  # 1 hour
  timeout: 30
  retry_attempts: 3
  retry_delay: 5

# Logging
logging:
  level: INFO
  format: json
  output: logs/vikunja-integration.log
  rotation:
    max_size: 10MB
    backup_count: 5